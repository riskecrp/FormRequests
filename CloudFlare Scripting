export default {
  async fetch(request, env, ctx) {
    const body = await request.text();
    const params = new URLSearchParams(body);
    const command = params.get("command");

    let text = "Sorry, I don’t recognize that command.";

    switch (command) {
      case "/rstf":
        text = "Here’s your RSTF Outcome Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLScy2DFvazCP1aEb9YeAUaAMZB16I4R0AidGkcJ-491k-v5kGQ/viewform";
        break;
      case "/refund":
        text = "Here’s your Refund Request Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSdewJ9CK_gMXoHJ1uu2HpKNVKLoYPVlOY4prJ5ziP5PiQ5klg/viewform";
        break;
      case "/google":
        text = "Here’s your Google Refund Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSeudnjJTlfIleb88heSw2wTgrLjx_wTIIYu7vCwsgVAHL0SZg/viewform";
        break;
      case "/reship":
        text = "Here’s your Reshipment Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLScayVj5c56MCQ3SDh5BxrETqc3Nyfei2ZaoSXNz7QJy9aoGUA/viewform";
        break;
      case "/undeliverable":
        text = "Here’s your Undeliverable Email Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSf1BDgxeC5muMhc6DLzxAf0bk-a-xKTaHl4ezIdUM5t_Oh2fA/viewform";
        break;
      case "/freebie":
        text = "Here’s your Employee Freebie Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSfk7-9YJqrfydetgOK4JnpMtwaZ7mwvSErd7uDtIbYCk6qFKQ/viewform";
        break;
      case "/product":
        text = "Here’s your Product Complaint Form:\nhttps://docs.google.com/forms/d/1nyFUGWNNtwijTn3Yrmv1tGOpob0NpWc5KFMFaihEFqU/viewform";
        break;
      case "/mm":
        text = "Here’s your Momentum Mastery Cancellation Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSdxya9Y1VM7DNIqfmEqdDTSTUKQsVFxDCAbbC8UNTfnm6QddA/viewform";
        break;
      case "/apple":
        text = "Here’s your Apple Devices (iOS) Video Playback Issues Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSfoUP9wpXFkaalMM01j1o5_gg-un2QB7YkllTOe0jO3m-q_ag/viewform";
        break;
      case "/resub":
        text = "Here’s your Resubscribe to Marketing Emails/Texts Request Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSfCqDN6AAep-d72j-yzWkDHrUUDGrA_EVlbGGuBja0M5hrYSA/viewform";
        break;
      case "/glitch":
        text = "Here’s your Digital Glitch Form:\nhttps://docs.google.com/forms/d/e/1FAIpQLSfacLCLon1T9hWCcQD9Xm58dYvLMxSmTb9c7yBOXLJxDzzoLg/viewform";
        break;
      case "/help":
        text = `Here are the available commands:
/rstf - RSTF Outcome Form
/refund - Refund Request Form
/google - Google Refund Form
/reship - Reshipment Form
/undeliverable - Undeliverable Email Form
/freebie - Employee Freebie Form
/product - Product Complaint Form
/mm - Momentum Mastery Cancellation Form
/apple - Apple Devices (iOS) Video Playback Issues Tracking Form
/resub - Resubscribe to Marketing Emails/Texts Request Form
/glitch - Digital Glitch Form (Non-iOS)

Type any command to receive its corresponding form link.`;
        break;
    }

    return new Response(
      JSON.stringify({
        response_type: "ephemeral", // only visible to the user
        text
      }),
      { headers: { "Content-Type": "application/json" } }
    );
  }
}
